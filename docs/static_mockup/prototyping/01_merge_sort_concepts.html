<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Merge Sort Visualization Concepts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Mocking the app's dark theme */
      body {
        background-color: #0f172a;
        color: white;
      }
      .panel {
        background-color: #1e293b;
      }
    </style>
  </head>
  <body class="h-screen flex flex-col p-8">
    <h1 class="text-2xl font-bold mb-6 text-slate-200">
      Merge Sort Visualization Concepts
    </h1>

    <!-- Main Container (Simulating the 60% Left Panel) -->
    <div
      id="panel-visualization"
      class="w-[800px] h-[600px] panel rounded-lg flex flex-col items-start overflow-y-auto overflow-x-hidden py-4 px-6 border border-slate-700 mx-auto"
    >
      <div class="mx-auto w-full max-w-3xl space-y-8">
        <!-- CONCEPT 1: RECURSION TREE (Context) -->
        <!-- This uses the 'all_intervals' data from the trace -->
        <div class="space-y-2">
          <h2
            class="text-sm font-semibold text-slate-400 uppercase tracking-wider"
          >
            1. Recursion Tree (Macro View)
          </h2>
          <div
            class="bg-slate-900/50 p-4 rounded-lg border border-slate-700 relative h-48"
          >
            <!-- Axis -->
            <div
              class="absolute bottom-2 left-4 right-4 h-px bg-slate-600"
            ></div>
            <div class="absolute bottom-0 left-4 text-[10px] text-slate-500">
              Idx 0
            </div>
            <div class="absolute bottom-0 right-4 text-[10px] text-slate-500">
              Idx 7
            </div>

            <!-- Level 0 (Root) -->
            <div
              class="absolute top-4 left-4 right-4 h-6 bg-blue-900/40 border border-blue-500/50 rounded flex items-center justify-center text-xs text-blue-200"
            >
              [0...7] Splitting
            </div>

            <!-- Level 1 -->
            <div
              class="absolute top-14 left-4 w-[48%] h-6 bg-green-900/40 border border-green-500/50 rounded flex items-center justify-center text-xs text-green-200"
            >
              [0...3] Splitting
            </div>
            <div
              class="absolute top-14 right-4 w-[48%] h-6 bg-slate-800/40 border border-slate-600/30 rounded flex items-center justify-center text-xs text-slate-500"
            >
              [4...7] Pending
            </div>

            <!-- Level 2 -->
            <div
              class="absolute top-24 left-4 w-[23%] h-6 bg-amber-900/40 border border-amber-500/50 rounded flex items-center justify-center text-xs text-amber-200"
            >
              [0...1] Merging
            </div>
            <div
              class="absolute top-24 left-[28%] w-[23%] h-6 bg-slate-800/40 border border-slate-600/30 rounded flex items-center justify-center text-xs text-slate-500"
            >
              [2...3]
            </div>
          </div>
        </div>

        <!-- CONCEPT 2: ACTIVE MERGE OPERATION (Micro View) -->
        <!-- This visualizes the specific comparison happening NOW -->
        <div class="space-y-4">
          <h2
            class="text-sm font-semibold text-slate-400 uppercase tracking-wider"
          >
            2. Active Merge (Micro View)
          </h2>

          <div
            class="bg-slate-900/50 p-6 rounded-lg border border-slate-700 flex flex-col items-center gap-6"
          >
            <!-- Source Arrays -->
            <div class="flex gap-12 items-end">
              <!-- Left Subarray -->
              <div class="flex flex-col items-center gap-2">
                <span class="text-xs text-blue-400 font-bold"
                  >LEFT [0...0]</span
                >
                <div class="flex gap-1">
                  <!-- Active Element -->
                  <div
                    class="w-12 h-12 bg-blue-600 border-2 border-blue-400 rounded flex items-center justify-center text-xl font-bold shadow-[0_0_15px_rgba(37,99,235,0.5)]"
                  >
                    6
                  </div>
                  <!-- Remaining (Empty in this case) -->
                </div>
              </div>

              <!-- Comparison Operator -->
              <div
                class="pb-3 text-2xl font-bold text-yellow-400 animate-pulse"
              >
                &gt;
              </div>

              <!-- Right Subarray -->
              <div class="flex flex-col items-center gap-2">
                <span class="text-xs text-purple-400 font-bold"
                  >RIGHT [1...1]</span
                >
                <div class="flex gap-1">
                  <!-- Active Element -->
                  <div
                    class="w-12 h-12 bg-purple-600 border-2 border-purple-400 rounded flex items-center justify-center text-xl font-bold shadow-[0_0_15px_rgba(147,51,234,0.5)]"
                  >
                    5
                  </div>
                </div>
              </div>
            </div>

            <!-- Action Arrow -->
            <div class="text-slate-500 text-sm flex flex-col items-center">
              <span>Take Smaller</span>
              <svg
                class="w-6 h-6 text-slate-500"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 14l-7 7m0 0l-7-7m7 7V3"
                ></path>
              </svg>
            </div>

            <!-- Result Array -->
            <div class="flex flex-col items-center gap-2 w-full">
              <span class="text-xs text-green-400 font-bold"
                >MERGED RESULT</span
              >
              <div
                class="flex gap-1 p-2 bg-slate-800/50 rounded-lg border border-slate-700 min-w-[200px] justify-center min-h-[60px] items-center"
              >
                <!-- Empty slot placeholder -->
                <div
                  class="w-10 h-10 border-2 border-dashed border-slate-600 rounded flex items-center justify-center text-slate-600 text-sm"
                >
                  ?
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- CONCEPT 3: HYBRID (Combined) -->
        <!-- Can we fit both? -->
        <div
          class="p-4 bg-yellow-900/20 border border-yellow-700/50 rounded text-sm text-yellow-200"
        >
          <strong>Design Note:</strong> The "Recursion Tree" provides context
          (where are we?), while the "Active Merge" explains the logic (what are
          we doing?). <br /><br />
          Since the panel is scrollable (overflow-y-auto), we can stack these
          vertically. The Tree View can be compacted (thinner bars) to save
          space.
        </div>
      </div>
    </div>
  </body>
</html>
